name: main

# events that will trigger this workflow
on:
    push:
        branches:
            - main

jobs:

    build:
        name: Build
        runs-on: ubuntu-latest
        steps:

            - name: Setup Go 1.x
              uses: actions/setup-go@v2
              with:
                go-version: 1.19
              id: setup-go

            - name: Checkout application code
              uses: actions/checkout@v2

            - name: Resolve application dependencies
              run: |
                go mod tidy

            - name: Run tests
              run: go test -v ./...

            - name: Generate application build
              run: |
                go build -v -o build .